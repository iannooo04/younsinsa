enum OrderStatus {
  PENDING
  PAID
  SHIPPED
  DELIVERED
  CANCELLED
}

model CartItem {
  id               String   @id @default(cuid())
  userId           String
  user             UserInfo @relation(fields: [userId], references: [id], onDelete: Cascade)
  productId        String
  product          Product  @relation(fields: [productId], references: [id])
  productVariantId String?
  quantity         Int      @default(1)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([userId])
}

model Order {
  id              String      @id @default(cuid())
  userId          String
  user            UserInfo    @relation(fields: [userId], references: [id])
  status          OrderStatus @default(PENDING)
  totalAmount     Int
  shippingAddress String?
  items           OrderItem[]
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt

  @@index([userId])
}

model OrderItem {
  id               String  @id @default(cuid())
  orderId          String
  order            Order   @relation(fields: [orderId], references: [id], onDelete: Cascade)
  productId        String
  product          Product @relation(fields: [productId], references: [id])
  productVariantId String?
  quantity         Int
  price            Int     // Price at the time of order
}
