// prisma/schema/OrderPolicy.prisma

// ----------------------------------------------------------------------
// 주문 정책 (Order Policy) 통합 모델
// 주문 기본 설정 및 주문서 추가정보 관리 등을 포함합니다.
// ----------------------------------------------------------------------

// ----------------------------------------------------------------------
// 1. 주문 기본 설정 (Order Basic Settings)
// ----------------------------------------------------------------------

// 섹터별 전역 설정 모델 (하나의 레코드만 존재한다고 가정)
// 1. 주문 기본 설정 (Order Basic Settings)
// BasicPolicy.prisma로 이동됨



// ----------------------------------------------------------------------
// 2. 주문서 추가정보 관리 (Order Additional Info Settings)
// ----------------------------------------------------------------------

// 추가정보 사용 여부 (전역)
// OrderAdditionalInfoSettingsPage.tsx에서 "추가정보 사용 설정" 섹션이 별도로 있음
// 이것도 OrderBasicSettings에 포함하거나 별도 모델로 관리 가능.
// 여기서는 `OrderAdditionalInfoConfig`라는 별도 모델로 분리.

model OrderAdditionalInfoConfig {
  id             Int      @id @default(autoincrement())
  
  useAdditionalInfo String @default("unused") // used, unused
  
  updatedAt      DateTime @updatedAt
}

// 추가정보 리스트 아이템
// "노출순서", "상점구분", "노출상태", "필수여부", "항목명", "노출유형", "상세설정", "상품조건", "예외조건"

enum InputFieldType {
  TEXT      // 텍스트(한줄)
  TEXTAREA  // 텍스트(여러줄)
  RADIO     // 라디오버튼
  CHECKBOX  // 체크박스
  SELECT    // 셀렉트박스
  DATE      // 날짜
  FILE      // 파일첨부
}

model OrderAdditionalInfoItem {
  id             Int      @id @default(autoincrement())
  
  order          Int      @default(0) // 노출순서
  
  locale         String   @default("kr") // 상점 구분: kr(기준몰), cn(중문몰) 등. 탭으로 구분됨.
  
  isExposed      Boolean  @default(true)  // 노출상태
  isRequired     Boolean  @default(false) // 필수여부
  
  name           String   // 항목명 (예: "개인통관고유부호")
  
  displayType    InputFieldType @default(TEXT) // 노출유형
  
  // 상세설정 (JSON) - 선택형일 경우 옵션 값들, 텍스트일 경우 길이제한 등
  // 예: { "options": ["A", "B"], "placeholder": "입력하세요" }
  detailConfig   Json?
  
  // 상품조건 (JSON) - 특정 카테고리나 상품에만 노출할 경우
  // 예: { "target": "specific_products", "productIds": [1, 2] }
  productCondition Json?
  
  // 예외조건 (JSON) - 특정 조건 제외
  exceptionCondition Json?
  
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  
  @@index([locale])
  @@index([order])
}
